<!DOCTYPE html>
<html>
<head>
<title>Search Engine Test</title>
<script src="jquery-1.12.4.min.js"></script>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="googleStyle.css">

<script>
$(document).ready(function(){
	
	var SOLR_URL="http://localhost:8983/solr/islamkoshcore/searchkosh?"

	$("#tfq2b").click(function() {
		if ($("#tfq2b").val() == "Search our website"){
			$("#tfq2b").val(""); 
		}
	});
	
	$("#tfq2b").bind("enterKey",function(e){
		console.log($("#tfq2b").val());
		var query=$("#tfq2b").val();
		solrReq(query);
	});
	$("#tfq2b").keyup(function(e){
		if(e.keyCode == 13)
		{
		    $(this).trigger("enterKey");
		}
	});
	function solrReq(query) {
		   jQuery.ajax({
           url: SOLR_URL,
           type:"get",
           data: { 'json.wrf':'callback', 'q':query},
           dataType:"jsonp",
           success: function(data) {
               //console.log(data);
               writeDocs2(data.response.docs);
           },
           error: function(data) {
               successmessage = 'Error';
               $("label#successmessage").text(successmessage);
           },
           jsonpCallback: 'callback',
    	});
	}
    function writeDocs(docs){
		$("#solr_result").empty();
    	$.each(docs, function(index,value){
    		//console.log(value);
    		$("#solr_result").append(this.title+"<br>");
    		for(var item in this) {
    			//console.log(item+" : "+this[item]);
    		//	$("#solr_result").append(
    		//	"<p>" + item + " : " + this[item] + "</p>"
    		//	);
    		}
    	});
    }
    
    function writeDocs2(docs){
		$("#solr_result").empty();

    	var resutlBoxStart="<div class=\"gsc-webResult gsc-result\" >";
    	var resultBoxEnd="</div>";
    	$.each(docs, function(index,value){
			
			var title="<div class=\"gs-title\" >" + "<a class=\"gs-title\" href="+this.id+">"+ this.chapter+"</a></div>";
			var section="<div class=\"gs-title\" >" +this.section +"</div>";
			$("#solr_result").append(resutlBoxStart + title + section + resultBoxEnd);
			   		
    		
    	});

    }


});
</script>

</head>
<body>
	<!-- HTML for SEARCH BAR -->
	<div id="tfheader">
		<div id="tfnewsearch" >
		        <input type="text" id="tfq2b" class="tftextinput2" size="21" maxlength="120" value="Search our website">
		        <input type="submit" value=">" class="tfbutton2">
		</div>
		<div class="tfclear"></div>
	</div>
	
<div id="solr_result" class="gsc-results"></div>


</body>
</html>

