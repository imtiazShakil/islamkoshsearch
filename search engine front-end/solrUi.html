<!DOCTYPE html>
<html>
<head>
<title>Search Engine Test</title>
<script src="jquery-1.12.4.min.js"></script>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="googleStyle.css">

<script>
$(document).ready(function(){
    
    $("button").click(function(){
    	jQuery.ajax({
           url: "http://localhost:8983/solr/chorkiSearch/chorki?",
           type:"get",
           data: { 'json.wrf':'callback', 'q':'shirt'},
           dataType:"jsonp",
           success: function(data) {
               //console.log(data);
               writeDocs(data.response.docs);
           },
           error: function(data) {
               successmessage = 'Error';
               $("label#successmessage").text(successmessage);
           },
           jsonpCallback: 'callback',
    	});	
    });
	
	$("#tfq2b").click(function() {
		if ($("#tfq2b").val() == "Search our website"){
			$("#tfq2b").val(""); 
		}
	});
	
	$("#tfq2b").bind("enterKey",function(e){
		console.log($("#tfq2b").val());
		var query=$("#tfq2b").val();
		solrReq(query);
	});
	$("#tfq2b").keyup(function(e){
		if(e.keyCode == 13)
		{
		    $(this).trigger("enterKey");
		}
	});
	function solrReq(query) {
		   jQuery.ajax({
           url: "http://localhost:8983/solr/chorkiSearch/chorki?",
           type:"get",
           data: { 'json.wrf':'callback', 'q':query},
           dataType:"jsonp",
           success: function(data) {
               //console.log(data);
               writeDocs2(data.response.docs);
           },
           error: function(data) {
               successmessage = 'Error';
               $("label#successmessage").text(successmessage);
           },
           jsonpCallback: 'callback',
    	});
	}
    function writeDocs(docs){
		$("#solr_result").empty();
    	$.each(docs, function(index,value){
    		//console.log(value);
    		$("#solr_result").append(this.title+"<br>");
    		for(var item in this) {
    			//console.log(item+" : "+this[item]);
    		//	$("#solr_result").append(
    		//	"<p>" + item + " : " + this[item] + "</p>"
    		//	);
    		}
    	});
    }
    
    function writeDocs2(docs){
		$("#solr_result").empty();

    	var resutlBoxStart="<div class=\"gsc-webResult gsc-result\" >";
    	var resultBoxEnd="</div>";
    	$.each(docs, function(index,value){
			
			var title="<div class=\"gs-title\" >" + "<a class=\"gs-title\" href="+this.url+">"+ this.title+"</a></div>";
			$("#solr_result").append(resutlBoxStart+title+resultBoxEnd);
			   		
    		
    	});

    }


});
</script>

</head>
<body>
	<!-- HTML for SEARCH BAR -->
	<div id="tfheader">
		<div id="tfnewsearch" >
		        <input type="text" id="tfq2b" class="tftextinput2" size="21" maxlength="120" value="Search our website">
		        <input type="submit" value=">" class="tfbutton2">
		</div>
		<div class="tfclear"></div>
	</div>
	

<button>Execute</button>
<div id="solr_result" class="gsc-results"></div>


<div class="g">
<!--m-->
	<div class="rc" data-hveid="50">
		<h3 class="r">
			<a href="http://www.w3schools.com/html/html_css.asp">HTML CSS - W3Schools</a>
		</h3>
		<div class="s">
			<div>	
				<span class="st" data-hveid="57">Chapter Summary. Use the <em>HTML</em> style attribute for inline <em>styling</em>. Use the <em>HTML</em> &lt;style&gt; element to define internal <em>CSS</em>. Use the <em>HTML</em> &lt;<em>link</em>&gt; element to refer to an external <em>CSS file</em>. Use the <em>HTML</em> &lt;head&gt; element to store &lt;style&gt; and &lt;<em>link</em>&gt; elements. Use the <em>CSS</em> color property for text colors.</span>
			</div>
		</div>
	</div>
</div>
</body>
</html>

